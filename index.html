<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservas de Valoraciones Estéticas Viarmoni</title>
    
    <!-- 
      APLICACIÓN DE RESERVAS EN UN SOLO ARCHIVO
      HTML, CSS y JavaScript nativo (sin frameworks)
      Almacenamiento: localStorage
    -->
    <style>
        /* --- 1. Variables de Diseño y Reseteo --- */
        :root {
            --white: #ffffff;
            --bg-light: #fdfaf9; /* Un blanco muy suave con tono rosa */
            --text-dark: #4a4a4a;
            --primary-gold: #c5a984; /* Oro suave */
            --secondary-rose: #e0c0c3; /* Rosa pálido */
            --accent-dark: #a1886b; /* Oro más oscuro para hover */
            --danger: #b76e79;
            --success: #6ba18b;
            
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-elegant: "Times New Roman", Times, serif; /* Tipografía elegante simple */

            --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.06);
            --shadow-medium: 0 6px 25px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --header-height: 60px; /* Altura fija para el header */
            --nav-height: 60px; /* Altura fija para el nav inferior */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            /* overflow: hidden; <--- Eliminado para permitir scroll interno */
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            padding-top: var(--header-height); /* Añade espacio para el header fijo */
        }

        main {
            height: 100%; /* Ocupa el espacio restante del body */
        }

        /* --- 2. Componentes Reutilizables --- */
        .container {
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 1.8rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(145deg, var(--primary-gold), var(--accent-dark));
            color: var(--white);
            box-shadow: 0 4px 15px rgba(197, 169, 132, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(197, 169, 132, 0.5);
        }

        .btn-secondary {
            background-color: var(--white);
            color: var(--primary-gold);
            border: 2px solid var(--primary-gold);
        }

        .btn-secondary:hover {
            background-color: var(--primary-gold);
            color: var(--white);
        }

        .card {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        h1, h2, h3 {
            font-family: var(--font-elegant);
            color: var(--text-dark);
            font-weight: 600;
            line-height: 1.2;
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; margin-bottom: 1.5rem; color: var(--accent-dark); text-align: center; }
        h3 { font-size: 1.4rem; margin-bottom: 1rem; color: var(--primary-gold); }

        /* --- 3. Encabezado y Navegación (Desktop) --- */
        .header {
            background-color: var(--white);
            box-shadow: var(--shadow-light);
            padding: 0 1rem; /* Padding horizontal en lugar de vertical */
            position: fixed; /* Cambiado a fixed para que siempre esté visible */
            top: 0;
            left: 0; /* Asegura que se alinee a la izquierda */
            z-index: 1000; /* Aumentado para estar sobre todo */
            width: 100%;
            height: var(--header-height); /* Altura fija */
            display: flex; /* Para centrar contenido verticalmente */
            align-items: center; /* Centrar contenido verticalmente */
        }

        .header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%; /* Asegura que el container ocupe todo el espacio */
        }

        .logo {
            display: flex;
            align-items: center;
            font-family: var(--font-elegant);
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-gold);
            text-decoration: none;
        }

        .logo img {
            max-height: 40px;
        }

        .nav-links {
            display: none; /* Oculto por defecto en móvil */
        }

        .nav-links a {
            margin-left: 1.5rem;
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative; /* Para el indicador ::after */
            padding: 0.5rem 0;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary-gold);
        }
        
        /* Indicador activo para el menú de escritorio */
        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -5px; /* Ajustar posición */
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-gold);
            animation: slideIn 0.3s ease;
        }
        
        /* Botón de agendar principal - Visible en todas las vistas */
        .header .btn-primary {
            display: inline-block; 
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            background: linear-gradient(135deg, var(--secondary-rose), var(--danger));
            box-shadow: 0 4px 15px rgba(224, 192, 195, 0.4);
            animation: pulse 2.5s infinite; /* Animación de pulso */
        }
        
        .header .btn-primary:hover {
            transform: translateY(-2px) scale(1.05); /* Efecto más pronunciado al pasar el ratón */
            box-shadow: 0 6px 20px rgba(224, 192, 195, 0.6);
        }


        /* --- 4. Menú Inferior Fijo (Mobile) --- */
        .bottom-nav {
            position: fixed;
            bottom: 1rem; /* Separación del borde inferior */
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px; /* Ancho máximo para el menú */
            
            /* Efecto Glassmorphism */
            background: rgba(255, 255, 255, 0.2); /* Fondo semitransparente */
            backdrop-filter: blur(15px); /* El desenfoque clave del efecto */
            -webkit-backdrop-filter: blur(15px); /* Para Safari */
            border-radius: 50px; /* Bordes redondeados */
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);

            display: flex;
            justify-content: space-around;
            align-items: center;
            height: var(--nav-height);
            z-index: 1000;
            overflow: hidden; /* Para que el indicador no se salga */
        }

        .bottom-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-dark);
            font-size: 0.75rem;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
            flex: 1; /* Para que ocupen el mismo espacio */
            padding-top: 5px; /* Pequeño ajuste visual */
            height: 100%; /* Ocupar altura */
            justify-content: center; /* Centrar contenido */
        }

        .bottom-nav-item i {
            font-size: 1.6rem; /* Iconos un poco más grandes */
            margin-bottom: 4px;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, var(--secondary-rose), var(--danger));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        /* Efecto de icono metálico degradado */
        .bottom-nav-item.active i {
            transform: scale(1.2); /* Efecto de selección más pronunciado */
            filter: brightness(1.1);
        }

        .bottom-nav-item span {
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .bottom-nav-item.active span {
            color: #5a4b3a; /* Un color oscuro y elegante para el texto */
            font-weight: 600;
        }
        
        .bottom-nav-item:hover i {
            color: #8a6d50;
        }

        .bottom-nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 6px; /* Posicionado en la parte inferior */
            left: 50%;
            transform: translateX(-50%);
            width: 8px; /* Un punto sutil */
            height: 8px;
            background-color: #5a4b3a; /* Mismo color que el texto activo */
            border-radius: 50%;
            animation: popIn 0.3s ease;
        }
        
        /* Oculta los iconos de Font Awesome si no están cargados */
        .bottom-nav-item i:before {
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
        }
        .bottom-nav-item[data-icon="home"] i::before { content: "\f015"; }
        .bottom-nav-item[data-icon="info"] i::before { content: "\f129"; }
        .bottom-nav-item[data-icon="images"] i::before { content: "\f03e"; }
        .bottom-nav-item[data-icon="clipboard-list"] i::before { content: "\f46d"; }

        /* --- 5. Estructura de Pantalla Completa --- */
        
        .fullscreen-section {
            display: none; /* Oculto por defecto */
            height: 100%; /* Ocupa la altura del contenedor 'main' */
            position: relative;
            /* overflow: hidden; <--- Eliminado para permitir scroll del container hijo */
            flex-direction: column;
        }

        .fullscreen-section.active {
            display: flex; /* Se muestra la sección activa */
            animation: fadeIn 0.5s ease;
        }
        
        /* El container dentro de una sección de pantalla completa */
        .fullscreen-section > .container {
            overflow-y: auto; /* Permite scroll INTERNO si el contenido es muy largo */
            flex-grow: 1; /* Ocupa el espacio restante */
            padding-top: 2rem;
            padding-bottom: 2rem;
            /* Para que el scroll interno respete los paddings */
            height: 100%; 
        }

        /* --- 5.1 Sección Principal (Hero) --- */
        .hero {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(rgba(255, 255, 255, 0.8), rgba(253, 250, 249, 1)), 
                        url(https://placehold.co/1200x800/e0c0c3/ffffff?text=Viarmoni+Est%C3%A9tica) center/cover no-repeat;
        }
        
        /* Caso especial: El container del hero no debe tener scroll */
        .hero > .container {
            overflow-y: visible;
            flex-grow: 0; /* No crece, solo se centra */
            height: auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }


        .hero h1 {
            animation: blurIn 0.8s ease-out forwards;
            color: #5a4b3a; 
        }
        
        .hero p {
            font-size: 1.2rem;
            margin: 1rem 0 2rem;
            max-width: 600px;
            animation: blurIn 0.8s ease-out 0.4s forwards;
            animation-fill-mode: backwards;
        }

        .hero .btn {
            animation: blurIn 0.8s ease-out 0.8s forwards;
            animation-fill-mode: backwards;
        }

        /* --- 6. Secciones Informativas --- */
        .info-section > .container,
        .gallery-section > .container,
        .admin-section > .container {
             /* El padding-top y bottom se maneja en el scroll-padding del html */
             /* Se re-añade padding para el contenido interno */
             padding-top: 2rem;
             padding-bottom: 2rem;
        }
        

        .info-section ul, .info-section ol {
            padding-left: 1.5rem;
        }

        .info-section li {
            margin-bottom: 0.75rem;
        }

        /* --- 6.1 Tarjetas de Información --- */
        .info-cards-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .info-card {
            background: linear-gradient(145deg, #fcefee, #f8d7da);
            padding: 2rem;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(224, 192, 195, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .info-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(224, 192, 195, 0.4);
        }

        .info-card i {
            font-size: 3rem;
            color: #b76e79;
            margin-bottom: 1rem;
            display: block;
        }

        .info-card h3 {
            font-size: 1.5rem;
            color: #8a6d50;
        }

        /* --- 7. Galería (Transformaciones) --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: 1fr; /* 1 columna en móvil */
            gap: 1.5rem;
        }

        .transform-card {
            position: relative;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .transform-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: opacity 0.4s ease;
        }

        .img-before {
            position: relative;
        }

        .img-after {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
        }

        .transform-card:hover .img-after {
            opacity: 1;
        }
        
        .transform-card .label {
            position: absolute;
            top: 1rem;
            font-size: 0.9rem;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            color: var(--white);
            font-weight: 600;
        }
        
        .label-before {
            left: 1rem;
            background-color: rgba(183, 110, 121, 0.8); /* Rosa */
        }

        .label-after {
            right: 1rem;
            background-color: rgba(197, 169, 132, 0.8); /* Oro */
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .transform-card:hover .label-after {
            opacity: 1;
        }
        
        .transform-card:hover .label-before {
            opacity: 0;
        }

        .transform-card h4 {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: var(--white);
            padding: 2rem 1rem 1rem;
            font-size: 1.3rem;
            font-family: var(--font-main);
        }

        /* --- 8. Panel de Administración --- */
        .admin-section {
            background-color: var(--white);
        }

        .filters {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .filters select {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: var(--bg-light);
            font-size: 1rem;
        }

        #booking-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .booking-card {
            border-left: 5px solid var(--secondary-rose);
        }

        .booking-card.status-confirmada { border-color: var(--success); }
        .booking-card.status-atendida { border-color: var(--primary-gold); }
        .booking-card.status-cancelada { border-color: var(--danger); }
        
        .booking-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .booking-card-header h4 {
            font-family: var(--font-main);
            font-size: 1.2rem;
            color: var(--text-dark);
        }
        
        .booking-card-body p {
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        .booking-card-body p strong {
            color: var(--accent-dark);
        }
        
        .booking-card-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .booking-card-actions select {
            flex-grow: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .delete-btn {
            padding: 0.5rem 1rem;
            background-color: var(--danger);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .delete-btn:hover {
            background-color: #a15a65;
        }
        

        /* --- 9. Pie de Página (Ahora dentro de Admin-Section) --- */
        .footer {
            background-color: #333;
            color: #f0f0f0;
            text-align: center;
            padding: 3rem 1rem;
            /* Se añade margen y borde para separarlo del contenido de admin */
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid #444;
        }
        
        .footer p {
            margin-bottom: 1rem;
        }

        .footer .nav-admin a {
            color: var(--primary-gold);
            text-decoration: none;
        }

        /* --- 10. Modal de Reserva --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none; /* Se activa con JS */
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 1rem;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            width: 100%;
            max-width: 500px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideInUp 0.4s ease-out;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            border: none;
            background: none;
        }
        .modal-close:hover {
            color: var(--danger);
        }
        
        .modal-content h2 {
            text-align: left;
            margin-bottom: 2rem;
        }
        
        /* Formulario */
        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.85rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: var(--font-main);
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-gold);
            box-shadow: 0 0 8px rgba(197, 169, 132, 0.3);
        }
        
        .form-group input::placeholder {
            color: #aaa;
        }

        #form-error {
            color: var(--danger);
            font-weight: 600;
            margin-bottom: 1rem;
            display: none; /* Oculto por defecto */
        }
        
        /* Modal de Confirmación */
        #confirmation-content {
            text-align: center;
        }

        #confirmation-content .icon {
            font-size: 4rem;
            color: var(--success);
            animation: popIn 0.5s ease;
        }
        
        #confirmation-content h3 {
            margin-top: 1rem;
            color: var(--success);
        }
        
        #confirmation-details {
            text-align: left;
            margin: 2rem 0;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 8px;
            border: 1px solid #eee;
        }
        
        #confirmation-details p {
            margin-bottom: 0.75rem;
        }
        
        #info-modal .modal-content {
            background-color: #fdfaf9 !important; /* Fondo rosa pálido, forzado para evitar conflictos */
        }

        #info-modal-content h3 {
            font-size: 1.8rem;
            color: var(--accent-dark);
            margin-bottom: 1.5rem;
        }

        #info-modal-content p, 
        #info-modal-content li {
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        #info-modal-content ol,
        #info-modal-content ul {
            padding-left: 1.5rem;
            margin-top: 1rem;
        }

        .confirmation-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }


        /* --- 11. Media Queries (Desktop) --- */
        
        /* Estilos para móvil (por defecto) */
        @media (max-width: 767px) {
            html {
                /* Espacio para el nav inferior fijo en móvil */
                scroll-padding-bottom: var(--nav-height);
            }
        }
        
        /* Estilos para desktop */
        
        @media (min-width: 768px) {
            .info-cards-container {
                grid-template-columns: repeat(3, 1fr); /* 3 tarjetas en desktop */
            }
            
            body {
                padding-bottom: 0; /* No hay menú inferior en desktop */
            }

            .nav-links {
                display: block; /* Muestra nav en desktop */
            }

            .header .btn-primary {
                display: inline-block; /* Muestra botón de agendar en header */
            }

            .bottom-nav {
                display: none; /* Oculta menú inferior */
            }
            
            .hero h1 {
                font-size: 3.5rem;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .filters {
                flex-direction: row;
            }
            
            .filters select {
                min-width: 200px;
                flex-grow: 0;
            }

            #booking-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .gallery-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            #booking-list {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* --- 12. Estilos de Impresión --- */
        @media print {
            body * {
                visibility: hidden; /* Oculta todo */
            }

            /* Muestra solo el contenido de la confirmación */
            #confirmation-content, #confirmation-content * {
                visibility: visible;
            }
            
            #confirm-modal {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                max-width: 100%;
                box-shadow: none;
                border: 1px solid #666;
            }
            
            .modal-overlay {
                background: none;
            }

            /* Oculta botones en la impresión */
            .confirmation-actions, .modal-close {
                display: none;
            }
        }


        /* --- 13. Animaciones --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInUp {
            from { opacity: 0.5; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(224, 192, 195, 0.3);
            }
            70% {
                transform: scale(1.03);
                box-shadow: 0 6px 25px rgba(224, 192, 195, 0.5);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(224, 192, 195, 0.3);
            }
        }
        
        @keyframes blurIn {
            from {
                opacity: 0;
                filter: blur(5px);
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                filter: blur(0);
                transform: translateY(0);
            }
        }

    </style>
    <!-- Font Awesome para los iconos del menú inferior -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" xintegrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <!-- ==== ENCABEZADO FIJO ==== -->
    <header class="header">
        <div class="container">
            <a href="#home" class="logo"><img src="https://viarmoni.com/wp-content/uploads/2025/11/cropped-logo-horizontal-25-scaled-1.png" alt="Viarmoni Logo"></a>
            <nav class="nav-links">
                <a href="#home">Inicio</a>
                <a href="#info-section">Cuidados</a>
                <a href="#gallery-section">Galería</a>
                <a href="#admin-section">Admin Citas</a>
            </nav>
            <button class="btn btn-primary" id="header-book-btn">Agendar</button>
        </div>
    </header>

    <main>

        <!-- ==== SECCIÓN HERO ==== -->
        <section class="hero fullscreen-section active" id="home">
            <div class="container">
                <h1>Armonización Facial: Belleza que Resalta, no Transforma.</h1>
                <p>En Viarmoni, esculpimos tu belleza natural con procedimientos de armonización facial mínimamente invasivos. Redescubre tus rasgos y proyecta la mejor versión de ti. ¿Lista para empezar?</p>
                <button class="btn btn-primary btn-lg" id="hero-book-btn">Iniciar mi Transformación</button>
            </div>
        </section>

        <!-- ==== SECCIÓN INFORMATIVA (Pestañas) ==== -->
        <section class="info-section fullscreen-section" id="info-section">
            <div class="container">
                <h2>Información Importante</h2>
                
                <div class="info-cards-container">
                    <div class="info-card" data-content-id="info-instructions">
                        <i class="fas fa-list-ol"></i>
                        <h3>Instrucciones</h3>
                    </div>
                    <div class="info-card" data-content-id="info-pre-op">
                        <i class="fas fa-shield-alt"></i>
                        <h3>Cuidados Previos</h3>
                    </div>
                    <div class="info-card" data-content-id="info-post-op">
                        <i class="fas fa-heartbeat"></i>
                        <h3>Cuidados Post</h3>
                    </div>
                </div>

                <!-- Contenido oculto que se mostrará en el modal -->
                <div class="hidden-content" style="display: none;">
                    <div id="info-instructions">
                        <h3>Instrucciones para tu Valoración</h3>
                        <p>Para asegurar una valoración precisa y cómoda, te recomendamos:</p>
                        <ol>
                            <li>Asistir con el rostro limpio, sin maquillaje en la zona a evaluar.</li>
                            <li>Traer una lista de medicamentos o suplementos que estés tomando actualmente.</li>
                            <li>Evitar consumir alcohol o antiinflamatorios (como aspirina) 24 horas antes, especialmente si se considera una rinomodelación o labios.</li>
                            <li>Tener claras tus expectativas y preparar cualquier pregunta que tengas para el especialista.</li>
                        </ol>
                    </div>
                    <div id="info-pre-op">
                        <h3>Cuidados Prequirúrgicos</h3>
                        <p>Si tu procedimiento es aprobado y agendado, generalmente deberás:</p>
                        <ul>
                            <li>Realizar ayuno de 8 horas antes del procedimiento.</li>
                            <li>Suspender el consumo de tabaco al menos 2 semanas antes.</li>
                            <li>Hidratarte bien los días previos.</li>
                            <li>Coordinar quién te acompañará y te llevará a casa después del procedimiento.</li>
                        </ul>
                    </div>
                    <div id="info-post-op">
                        <h3>Cuidados Postquirúrgicos</h3>
                        <p>La recuperación es clave para un resultado exitoso:</p>
                        <ul>
                            <li>Seguir al pie de la letra la medicación (antibióticos, analgésicos) recetada.</li>
                            <li>Aplicar compresas frías en la zona para reducir la inflamación.</li>
                            <li>Dormir con la cabeza elevada (semi-sentado) los primeros días (para bichectomía o lipopapada).</li>
                            <li>Evitar la exposición directa al sol y usar protector solar rigurosamente.</li>
                            <li>Asistir a todos los controles postoperatorios programados.</li>
                        </ul>
                    </div>
                </div>

            </div>
        </section>

        <!-- ==== SECCIÓN GALERÍA ==== -->
        <section class="gallery-section fullscreen-section" id="gallery-section">
            <div class="container">
                <h2>Nuestras Transformaciones</h2>
                <div class="gallery-grid">
                    
                    <div class="transform-card">
                        <img src="https://placehold.co/400x500/d6b4b8/ffffff?text=Antes" alt="Antes Rinomodelación" class="img-before">
                        <img src="https://placehold.co/400x500/c5a984/ffffff?text=Despu%C3%A9s" alt="Después Rinomodelación" class="img-after">
                        <span class="label label-before">Antes</span>
                        <span class="label label-after">Después</span>
                        <h4>Rinomodelación</h4>
                    </div>
                    
                    <div class="transform-card">
                        <img src="https://placehold.co/400x500/d6b4b8/ffffff?text=Antes" alt="Antes Labios" class="img-before">
                        <img src="https://placehold.co/400x500/c5a984/ffffff?text=Despu%C3%A9s" alt="Después Labios" class="img-after">
                        <span class="label label-before">Antes</span>
                        <span class="label label-after">Después</span>
                        <h4>Aumento de Labios</h4>
                    </div>

                    <div class="transform-card">
                        <img src="https://placehold.co/400x500/d6b4b8/ffffff?text=Antes" alt="Antes Lipopapada" class="img-before">
                        <img src="https://placehold.co/400x500/c5a984/ffffff?text=Despu%C3%A9s" alt="Después Lipopapada" class="img-after">
                        <span class="label label-before">Antes</span>
                        <span class="label label-after">Después</span>
                        <h4>Lipopapada</h4>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==== PANEL DE ADMINISTRACIÓN (Y FOOTER) ==== -->
        <section class="admin-section fullscreen-section" id="admin-section">
            <div class="container">
                <h2>Panel de Reservas</h2>
                <div class="filters">
                    <select id="filter-city">
                        <option value="">Filtrar por Ciudad</option>
                        <option value="Popayán">Popayán</option>
                        <option value="Cali">Cali</option>
                        <option value="Pereira">Pereira</option>
                    </select>
                    <select id="filter-procedure">
                        <option value="">Filtrar por Procedimiento</option>
                        <option value="Lipopapada">Lipopapada</option>
                        <option value="Bichectomía">Bichectomía</option>
                        <option value="Labios">Labios</option>
                        <option value="Rinomodelación">Rinomodelación</option>
                    </select>
                </div>
                
                <div id="booking-list">
                    <!-- Las tarjetas de reserva se insertarán aquí con JS -->
                </div>

                <!-- EL FOOTER AHORA VIVE DENTRO DEL CONTAINER DE LA ÚLTIMA SECCIÓN -->
                <footer class="footer">
                    <p>© 2025 Viarmoni. Todos los derechos reservados.</p>
                    <p class="nav-admin">Estás en el <a href="#admin-section">Panel de Citas</a>.</p>
                </footer>
            </div>
        </section>

    </main>

    <!-- ==== MENÚ INFERIOR FIJO (Mobile Only) ==== -->
    <nav class="bottom-nav">
        <a href="#home" class="bottom-nav-item active" data-icon="home">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </a>
        <a href="#info-section" class="bottom-nav-item" data-icon="info">
            <i class="fas fa-heart"></i>
            <span>Cuidados</span>
        </a>
        <a href="#gallery-section" class="bottom-nav-item" data-icon="images">
            <i class="fas fa-exchange-alt"></i>
            <span>Cambios</span>
        </a>
        <a href="#admin-section" class="bottom-nav-item" data-icon="clipboard-list">
            <i class="fas fa-calendar-check"></i>
            <span>Citas</span>
        </a>
    </nav>


    <!-- ==== MODAL DE RESERVA ==== -->
    <div class="modal-overlay" id="booking-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-booking-modal">&times;</button>
            <h2>Agendar Valoración</h2>
            <form id="booking-form" novalidate>
                
                <div id="form-error"></div>

                <div class="form-group">
                    <label for="name">Nombre Completo</label>
                    <input type="text" id="name" name="name" placeholder="Escribe tu nombre" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" id="email" name="email" placeholder="tu@correo.com" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Teléfono (WhatsApp)</label>
                    <input type="tel" id="phone" name="phone" placeholder="Ej: 3001234567" pattern="[0-9]{10}" required>
                </div>
                
                <div class="form-group">
                    <label for="city">Ciudad de Valoración</label>
                    <select id="city" name="city" required>
                        <option value="" disabled selected>Selecciona una ciudad</option>
                        <option value="Popayán">Popayán</option>
                        <option value="Cali">Cali</option>
                        <option value="Pereira">Pereira</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="procedure">Procedimiento de Interés</label>
                    <select id="procedure" name="procedure" required>
                        <option value="" disabled selected>Selecciona un procedimiento</option>
                        <option value="Lipopapada">Lipopapada</option>
                        <option value="Bichectomía">Bichectomía</option>
                        <option value="Labios">Aumento de Labios</option>
                        <option value="Rinomodelación">Rinomodelación</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="date">Fecha</label>
                    <input type="date" id="date" name="date" required>
                </div>

                <div class="form-group">
                    <label for="time">Hora</label>
                    <select id="time" name="time" required>
                        <option value="" disabled selected>Selecciona primero una fecha</option>
                        <!-- Horarios se generan con JS -->
                    </select>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Confirmar Cita</button>
            </form>
        </div>
    </div>
    
    <!-- ==== MODAL DE CONFIRMACIÓN ==== -->
    <div class="modal-overlay" id="confirm-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-confirm-modal">&times;</button>
            
            <div id="confirmation-content">
                <div class="icon">✓</div>
                <h3>¡Cita Agendada!</h3>
                <p>Tu valoración ha sido registrada con éxito. Te esperamos.</p>
                
                <div id="confirmation-details">
                    <!-- Detalles de la cita se insertan aquí con JS -->
                </div>
            </div>

            <div class="confirmation-actions">
                <button class="btn btn-secondary" id="print-btn">Imprimir Comprobante</button>
                <button class="btn btn-primary" id="finish-btn">Finalizar</button>
            </div>
        </div>
    </div>

    <!-- ==== MODAL DE INFORMACIÓN INMERSIVA ==== -->
    <div class="modal-overlay" id="info-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-info-modal">&times;</button>
            <div id="info-modal-content">
                <!-- El contenido se inyectará aquí con JS -->
            </div>
        </div>
    </div>


    <!-- ==== SCRIPT PRINCIPAL ==== -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. Estado y Constantes ---
            let bookings = [];
            const STORAGE_KEY = 'aestheticBookingsViarmoni'; // Clave actualizada
            const HORARIOS = [
                "09:00", "09:30", "10:00", "10:30", "11:00", "11:30",
                "14:00", "14:30", "15:00", "15:30", "16:00", "16:30", "17:00"
            ];

            // --- 2. Selectores del DOM ---
            // Modales
            const bookingModal = document.getElementById('booking-modal');
            const confirmModal = document.getElementById('confirm-modal');
            const openModalBtns = [
                document.getElementById('header-book-btn'), // Desktop y Mobile
                document.getElementById('hero-book-btn')
            ];
            const closeModalBtns = [
                document.getElementById('close-booking-modal'),
                document.getElementById('close-confirm-modal'),
                document.getElementById('finish-btn')
            ];

            // Formulario
            const bookingForm = document.getElementById('booking-form');
            const dateInput = document.getElementById('date');
            const timeSelect = document.getElementById('time');
            const formError = document.getElementById('form-error');

            // Panel Admin
            const bookingList = document.getElementById('booking-list');
            const filterCity = document.getElementById('filter-city');
            const filterProcedure = document.getElementById('filter-procedure');

            // Confirmación e Impresión
            const printBtn = document.getElementById('print-btn');
            const confirmationDetails = document.getElementById('confirmation-details');
            
            // Tarjetas Info
            const infoCards = document.querySelectorAll('.info-card');
            const infoModal = document.getElementById('info-modal');
            const infoModalContent = document.getElementById('info-modal-content');
            const closeInfoModalBtn = document.getElementById('close-info-modal');

            // Navegación
            const sections = document.querySelectorAll('.fullscreen-section');
            const bottomNavItems = document.querySelectorAll('.bottom-nav-item');
            const desktopNavLinks = document.querySelectorAll('.nav-links a');


            // --- 3. Funciones Principales ---

            /**
             * Abre un modal
             * @param {HTMLElement} modal - El elemento modal a mostrar
             */
            const openModal = (modal) => {
                if(modal) modal.classList.add('active');
            };

            /**
             * Cierra un modal
             * @param {HTMLElement} modal - El elemento modal a ocultar
             */
            const closeModal = (modal) => {
                if(modal) modal.classList.remove('active');
            };

            /**
             * Carga las reservas desde localStorage
             */
            const loadBookings = () => {
                const data = localStorage.getItem(STORAGE_KEY);
                bookings = data ? JSON.parse(data) : [];
            };

            /**
             * Guarda las reservas en localStorage
             */
            const saveBookings = () => {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(bookings));
            };

            /**
             * Renderiza la lista de reservas en el panel de admin
             */
            const renderBookings = () => {
                const city = filterCity.value;
                const procedure = filterProcedure.value;

                // Filtrar reservas
                const filteredBookings = bookings.filter(booking => {
                    const cityMatch = !city || booking.city === city;
                    const procedureMatch = !procedure || booking.procedure === procedure;
                    return cityMatch && procedureMatch;
                });
                
                // Ordenar por fecha
                filteredBookings.sort((a, b) => new Date(a.date) - new Date(b.date));

                // Limpiar lista
                bookingList.innerHTML = '';

                if (filteredBookings.length === 0) {
                    bookingList.innerHTML = '<p>No hay reservas que coincidan con los filtros.</p>';
                    return;
                }

                // Crear y añadir tarjetas de reserva
                filteredBookings.forEach(booking => {
                    const card = document.createElement('div');
                    card.className = `card booking-card status-${booking.status}`;
                    card.innerHTML = `
                        <div class="booking-card-header">
                            <h4>${booking.name}</h4>
                            <span class="booking-date">${booking.date}</span>
                        </div>
                        <div class="booking-card-body">
                            <p><strong>Proced:</strong> ${booking.procedure}</p>
                            <p><strong>Hora:</strong> ${booking.time}</p>
                            <p><strong>Ciudad:</strong> ${booking.city}</p>
                            <p><strong>Tel:</strong> ${booking.phone}</p>
                        </div>
                        <div class="booking-card-actions">
                            <select class="status-select" data-id="${booking.id}">
                                <option value="confirmada" ${booking.status === 'confirmada' ? 'selected' : ''}>Confirmada</option>
                                <option value="atendida" ${booking.status === 'atendida' ? 'selected' : ''}>Atendida</option>
                                <option value="cancelada" ${booking.status === 'cancelada' ? 'selected' : ''}>Cancelada</option>
                            </select>
                            <button class="delete-btn" data-id="${booking.id}">Eliminar</button>
                        </div>
                    `;
                    bookingList.appendChild(card);
                });
            };

            /**
             * Puebla las horas disponibles basadas en la fecha seleccionada
             */
            const populateTimeSlots = () => {
                const selectedDate = dateInput.value;
                if (!selectedDate) return;

                // Obtener horas ya reservadas para esa fecha
                const reservedSlots = bookings
                    .filter(b => b.date === selectedDate)
                    .map(b => b.time);

                timeSelect.innerHTML = '<option value="" disabled selected>Selecciona una hora</option>';

                HORARIOS.forEach(time => {
                    const isReserved = reservedSlots.includes(time);
                    const option = document.createElement('option');
                    option.value = time;
                    option.textContent = time;
                    option.disabled = isReserved;
                    if (isReserved) {
                        option.textContent += ' (Reservado)';
                    }
                    timeSelect.appendChild(option);
                });
            };

            /**
             * Valida el formulario
             * @returns {string|null} - Mensaje de error o null si es válido
             */
            const validateForm = (formData) => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const phoneRegex = /^\d{10}$/; // Asume 10 dígitos

                if (!formData.get('name') || !formData.get('email') || !formData.get('phone') || 
                    !formData.get('city') || !formData.get('procedure') || !formData.get('date') || !formData.get('time')) {
                    return 'Todos los campos son obligatorios.';
                }
                if (!emailRegex.test(formData.get('email'))) {
                    return 'El formato del correo no es válido.';
                }
                if (!phoneRegex.test(formData.get('phone'))) {
                    return 'El teléfono debe contener 10 dígitos numéricos.';
                }
                return null;
            };

            /**
             * Muestra el mensaje de error del formulario
             * @param {string} message - Mensaje a mostrar
             */
            const showFormError = (message) => {
                formError.textContent = message;
                formError.style.display = 'block';
            };
            
            /**
             * Oculta el mensaje de error del formulario
             */
            const hideFormError = () => {
                formError.textContent = '';
                formError.style.display = 'none';
            };

            /**
             * Maneja el envío del formulario de reserva
             */
            const handleFormSubmit = (e) => {
                e.preventDefault();
                hideFormError();
                
                const formData = new FormData(bookingForm);
                const validationError = validateForm(formData);

                if (validationError) {
                    showFormError(validationError);
                    return;
                }

                const newBooking = {
                    id: Date.now().toString(),
                    name: formData.get('name'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    city: formData.get('city'),
                    procedure: formData.get('procedure'),
                    date: formData.get('date'),
                    time: formData.get('time'),
                    status: 'confirmada' // Estado inicial
                };

                // Guardar
                bookings.push(newBooking);
                saveBookings();
                
                // Actualizar UI
                renderBookings();
                
                // Mostrar confirmación
                showConfirmation(newBooking);

                // Limpiar y cerrar
                bookingForm.reset();
                timeSelect.innerHTML = '<option value="" disabled selected>Selecciona primero una fecha</option>';
                closeModal(bookingModal);
            };

            /**
             * Muestra el modal de confirmación con los datos de la reserva
             * @param {object} booking - El objeto de la reserva
             */
            const showConfirmation = (booking) => {
                confirmationDetails.innerHTML = `
                    <p><strong>Nombre:</strong> ${booking.name}</p>
                    <p><strong>Procedimiento:</strong> ${booking.procedure}</p>
                    <p><strong>Ciudad:</strong> ${booking.city}</p>
                    <p><strong>Fecha:</strong> ${booking.date}</p>
                    <p><strong>Hora:</strong> ${booking.time}</p>
                `;
                openModal(confirmModal);
            };

            /**
             * Actualiza el estado de una reserva
             * @param {string} id - ID de la reserva
             * @param {string} newStatus - Nuevo estado (confirmada, atendida, cancelada)
             */
            const updateStatus = (id, newStatus) => {
                const index = bookings.findIndex(b => b.id === id);
                if (index !== -1) {
                    bookings[index].status = newStatus;
                    saveBookings();
                    renderBookings(); // Re-renderizar para actualizar color de borde
                }
            };

            /**
             * Elimina una reserva
             * @param {string} id - ID de la reserva a eliminar
             */
            const deleteBooking = (id) => {
                if (confirm('¿Estás seguro de que deseas eliminar esta cita?')) {
                    bookings = bookings.filter(b => b.id !== id);
                    saveBookings();
                    renderBookings();
                }
            };

            /**
             * Configura la fecha mínima en el input de fecha (hoy)
             */
            const setMinDate = () => {
                const today = new Date().toISOString().split('T')[0];
                dateInput.setAttribute('min', today);
            };
            
            /**
             * Maneja el clic en el panel de administración (delegación de eventos)
             */
            const handleAdminListClick = (e) => {
                const target = e.target;
                
                if (target.classList.contains('status-select')) {
                    const id = target.dataset.id;
                    const newStatus = target.value;
                    updateStatus(id, newStatus);
                }
                
                if (target.classList.contains('delete-btn')) {
                    const id = target.dataset.id;
                    deleteBooking(id);
                }
            };
            
            /**
             * Maneja el clic en una tarjeta de información, mostrando su contenido en un modal.
             */
            const handleInfoCardClick = (e) => {
                const card = e.currentTarget;
                const contentId = card.dataset.contentId;
                const contentSource = document.getElementById(contentId);

                if (contentSource) {
                    infoModalContent.innerHTML = contentSource.innerHTML;
                    openModal(infoModal);
                }
            };

            
            /**
             * Muestra la sección correspondiente al ID y actualiza el estado activo de los menús.
             * @param {string} targetId - El ID de la sección a mostrar (ej: "#home")
             */
            const showSection = (targetId) => {
                // Ocultar todas las secciones
                sections.forEach(section => {
                    section.classList.remove('active');
                });

                // Mostrar la sección correcta
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.classList.add('active');
                }

                // Actualizar el estado activo del menú inferior
                bottomNavItems.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('active');
                    }
                });

                // Actualizar el estado activo del menú superior
                desktopNavLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === targetId) {
                        link.classList.add('active');
                    }
                });
            };

            /**
             * Maneja el clic en los enlaces de navegación (superior e inferior)
             * para mostrar la sección correcta.
             */
            const handleNavClick = (e) => {
                e.preventDefault(); // Previene el comportamiento por defecto del ancla
                const targetId = e.currentTarget.getAttribute('href');
                showSection(targetId);
                
                // Opcional: Volver al inicio de la página en cada cambio de sección
                window.scrollTo(0, 0);
            };


            // --- 5. Inicialización y Event Listeners ---

            // Modales
            openModalBtns.forEach(btn => btn.addEventListener('click', () => openModal(bookingModal)));
            closeModalBtns.forEach(btn => btn.addEventListener('click', () => {
                closeModal(bookingModal);
                closeModal(confirmModal);
            }));

            // Formulario
            bookingForm.addEventListener('submit', handleFormSubmit);
            dateInput.addEventListener('change', populateTimeSlots);
            
            // Admin Panel
            filterCity.addEventListener('change', renderBookings);
            filterProcedure.addEventListener('change', renderBookings);
            bookingList.addEventListener('click', handleAdminListClick);

            // Imprimir
            printBtn.addEventListener('click', () => {
                window.print();
            });
            
            // Tarjetas de Info
            infoCards.forEach(card => card.addEventListener('click', handleInfoCardClick));
            closeInfoModalBtn.addEventListener('click', () => closeModal(infoModal));

            // Listeners para la navegación (superior e inferior)
            desktopNavLinks.forEach(link => {
                link.addEventListener('click', handleNavClick);
            });
            bottomNavItems.forEach(item => {
                item.addEventListener('click', handleNavClick);
            });

            // Carga inicial
            setMinDate();
            loadBookings();
            renderBookings();
        });
    </script>

</body>
</html>
